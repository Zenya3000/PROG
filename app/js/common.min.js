function checkActive(){for(var e=document.querySelectorAll(".main"),t=0;t<e.length;t++){var s=e[t];$(s).hasClass("active")?($(s).find("content").slideDown(300),s.setAttribute("status","open")):s.setAttribute("status","closed")}}var main=document.getElementsByClassName("main"),main_content=document.getElementsByClassName("content");if(main.length==main_content.length)for(var i=0;i<main.length;i++)main[i].setAttribute("name",i),main[i].setAttribute("status","");checkActive();var arrow=document.querySelectorAll(".main");for(i=0;i<arrow.length;i++){var num=arrow[i].attributes.name.nodeValue;$(arrow[num]).children().hasClass("content")&&$(arrow[num]).append('<span class="arrow "><i class="fas fa-chevron-right"></i></span>')}for(main=document.querySelectorAll(".main"),i=0;i<main.length;i++)main[i].onclick=function(){var e=this.attributes.name.nodeValue;return"open"==this.attributes.status.nodeValue&&$(this).children().hasClass("content")?($(this).children(".content").slideUp(300),console.log($(this).children()),this.attributes.status.nodeValue="closed",setTimeout(function(){$(main[e]).removeClass("active")},300),!1):(console.log("close main class with content clildren, FALSE"),"closed"==this.attributes.status.nodeValue&&$(this).children().hasClass("content")?($(this).children(".content").slideDown(300),this.attributes.status.nodeValue="open",setTimeout(function(){$(main[e]).addClass("active")},300),!1):void console.log("fail ((( open"))};var root="https://jsonplaceholder.typicode.com";$.ajax({url:root+"/users",method:"GET",success:function(e){for(var t=0;t<e.length;t++){var s='<tr><td class="name" data-number="'+e[t].id+'">'+e[t].name+"</td><td>"+e[t].email+'</td><td><button data-number="'+e[t].id+'" class="show_message btn btn-primary">show messages</button></td><td><button data-number="'+e[t].id+'" class="send_message btn btn-success">send messages</button></td></tr>';$("#left_side").append(s)}}}),$(document).on("click",".show_message",function(){$(".selected").removeClass("selected");var e=$(this).attr("data-number"),t=$('.name[data-number="'+e+'"]').text();$(this).parent().parent().addClass("selected"),$.ajax({url:root+"/posts?userId="+e,method:"get",beforeSend:function(){$(".show_message[data-number="+e+"]").addClass("disabled"),$(".show_message").attr("disabled",!0)},success:function(e){for(var s=s+"<tr><td>User: <strong>"+t+"</strong></td></tr>",a=0;a<e.length;a++)s=s+'<tr class="item"><td><span>'+e[a].body+"</span></td></tr>";$("#messages").html(""),$("#messages").append(s),function(e){$(".item").each(function(e){setTimeout(function(){$(".item").eq(e).fadeIn(300).addClass("isVisible")},300*e)}),setTimeout(function(e){$(".show_message").attr("disabled",!1),$(".show_message").removeClass("disabled")},300*e)}(e.length)}})}),$(document).on("click",".send_message",function(){var e=$(this).attr("data-number"),t=$("#send_messege").val();$.ajax({url:root+"/posts",method:"POST",body:{body:t,userId:e,title:"bla bla"},success:function(e){var s='<tr class="item"><td><span>'+t+"</span></td></tr>";$("#messages").append(s),$(".item").fadeIn(300).addClass("isVisible"),console.log("success")}}).then(function(e){console.log(e)})});